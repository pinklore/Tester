<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cool Embeds Demo</title>
  <style>
    :root { --bg:#0f1115; --card:#151823; --ink:#e9edf1; --muted:#93a0b4; --acc:#7aa2f7; }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;background:var(--bg);color:var(--ink);font:16px/1.5 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    header{position:sticky;top:0;z-index:10;background:linear-gradient(180deg,rgba(15,17,21,.97),rgba(15,17,21,.7));backdrop-filter:saturate(1.2) blur(8px);border-bottom:1px solid #1f2433}
    .wrap{max-width:1100px;margin:0 auto;padding:24px}
    h1{margin:0;font-size:28px}
    nav{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    nav a{display:inline-block;padding:8px 12px;border:1px solid #2a3146;border-radius:999px;text-decoration:none;color:var(--ink)}
    nav a:hover{border-color:var(--acc)}
    section{padding:28px 0;border-bottom:1px solid #1f2433}
    h2{font-size:22px;margin:0 0 14px}
    .card{background:var(--card);border:1px solid #1f2433;border-radius:16px;padding:14px;box-shadow:0 4px 20px rgba(0,0,0,.25)}
    .grid{display:grid;grid-template-columns:1fr;gap:18px}
    @media(min-width:900px){.grid{grid-template-columns:1fr 1fr}}
    iframe, .embed{width:100%;border:0;border-radius:12px}
    .hint{color:var(--muted);font-size:14px;margin-top:6px}
    footer{color:var(--muted);padding:28px 0}
    .pill{display:inline-block;background:#1f2433;color:#c6d0e3;border:1px solid #2a3146;border-radius:999px;padding:2px 10px;font-size:12px}
  </style>
  
  <!-- H5P Standalone player CSS (for self-hosted H5P embeds) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/h5p-standalone@3.7.0/dist/styles/h5p.css">

  <!-- Study widgets: KaTeX, Mermaid, Chart.js, JSXGraph -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" as="script">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsxgraph@1.8.0/distrib/jsxgraph.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/jsxgraph@1.8.0/distrib/jsxgraphcore.js"></script>

  <!-- Extra study libs: Leaflet, SimpleMDE (Markdown), p5.js -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simplemde@1.11.2/dist/simplemde.min.css">
  <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/simplemde@1.11.2/dist/simplemde.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.min.js"></script>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>Cool Things You Can Embed</h1>
      <nav aria-label="Section navigation">
        <a href="#video">Video</a>
        <a href="#music">Music & Audio</a>
        <a href="#maps">Maps</a>
        <a href="#code">Code</a>
        <a href="#design">Design & 3D</a>
        <a href="#social">Social</a>
        <a href="#calendar">Calendars</a>
        <a href="#countdown">Countdown</a>
      </nav>
    </div>
  </header>

  <main class="wrap">

    <section id="video">
      <h2>Video (YouTube)</h2>
      <div class="grid">
        <div class="card">
          <iframe height="315" src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
          <div class="hint">Swap the <span class="pill">src</span> with your own video’s embed URL.</div>
        </div>
      </div>
    </section>

    <section id="music">
      <h2>Music & Audio (Spotify + SoundCloud)</h2>
      <div class="grid">
        <div class="card">
          <iframe style="height:352px" src="https://open.spotify.com/embed/playlist/37i9dQZF1DXcBWIGoYBM5M" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>
          <div class="hint">Paste any public track/album/playlist embed from Spotify.</div>
        </div>
        <div class="card">
          <iframe height="166" scrolling="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/347186448&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&visual=false"></iframe>
          <div class="hint">Use SoundCloud’s Share → Embed to get this URL.</div>
        </div>
      </div>
    </section>

    <section id="maps">
      <h2>Google Maps</h2>
      <div class="grid">
        <div class="card">
          <iframe height="360" loading="lazy" referrerpolicy="no-referrer-when-downgrade" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d24143.50634536814!2d-73.9851306!3d40.7812195!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c2588f5fdfecfb%3A0x3a9d77f1a2b3f!2sCentral%20Park!5e0!3m2!1sen!2sus!4v1688320000000"></iframe>
          <div class="hint">Google Maps → Share → Embed a map → copy iframe.</div>
        </div>
      </div>
    </section>

    <section id="code">
      <h2>Code Demos (CodePen + GitHub Gist)</h2>
      <div class="grid">
        <div class="card">
          <p class="codepen" data-height="320" data-default-tab="result" data-slug-hash="YzGvXqa" data-user="TheRealNema" style="height: 320px;">
            <span>See the Pen <a href="https://codepen.io/TheRealNema/pen/YzGvXqa">Particles</a> by Nema on <a href="https://codepen.io">CodePen</a>.</span>
          </p>
          <div class="hint">Any CodePen share → Embed → copy the block and the script below.</div>
        </div>
        <div class="card">
          <script src="https://gist.github.com/paulirish/12fb951a8b893a454b32.js"></script>
          <div class="hint">Replace the Gist <span class="pill">.js</span> URL with your own to show code snippets.</div>
        </div>
      </div>
      <script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>
    </section>

    <section id="design">
      <h2>Design & 3D (Figma + Sketchfab)</h2>
      <div class="grid">
        <div class="card">
          <iframe height="450" src="https://www.figma.com/embed?embed_host=share&url=https://www.figma.com/community/file/1203600198206756139" allowfullscreen></iframe>
          <div class="hint">Figma: Share a public file → Embed.</div>
        </div>
        <div class="card">
          <iframe title="3D Model" height="450" src="https://sketchfab.com/models/eed6b1b665fb4a7f8f9f3f954ed7be35/embed" allow="autoplay; fullscreen; xr; vr"></iframe>
          <div class="hint">Sketchfab: Share → Embed to rotate and inspect 3D models.</div>
        </div>
      </div>
    </section>

    <section id="social">
      <h2>Social (X/Twitter Timeline)</h2>
      <div class="grid">
        <div class="card">
          <a class="twitter-timeline" data-height="520" href="https://twitter.com/NASA">Tweets by NASA</a>
          <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
          <div class="hint">Swap the profile URL for your own account or a list/hashtag.</div>
        </div>
      </div>
    </section>

    <section id="calendar">
      <h2>Calendars (Google Calendar)</h2>
      <div class="grid">
        <div class="card">
          <iframe height="600" src="https://calendar.google.com/calendar/embed?src=en.usa%23holiday%40group.v.calendar.google.com&ctz=America%2FChicago"></iframe>
          <div class="hint">Make your Google Calendar public → Settings → Integrate calendar → copy embed code.</div>
        </div>
      </div>
    </section>

    <section id="countdown">
      <h2>Vanilla JS Countdown (No third‑party)</h2>
      <div class="grid">
        <div class="card">
          <div id="countdown" class="embed" style="display:flex;align-items:center;justify-content:center;height:140px;font-size:28px;background:#0c0f16;border:1px dashed #2a3146">Loading…</div>
          <div class="hint">Edit the date in the script below.</div>
        </div>
      </div>
    </section>

    <section id="study">
      <h2>Study & STEM (Highly Interactive)</h2>
      <div class="grid">
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">H5P: Cornell Note‑Taking (self‑hosted)</h3>
          <div id="h5p-cornell" class="embed" style="min-height:480px;background:#0c0f16;border:1px dashed #2a3146;display:flex;align-items:center;justify-content:center">Loading…</div>
          <div class="hint">Place the extracted files at <span class="pill">h5p/cornell/</span> next to this page, then this will run locally (no LMS).</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">H5P Module Slot A</h3>
          <div id="h5p-slot-a" class="embed" data-h5p-json="h5p/slot-a" data-download="h5p/slot-a-original.h5p" style="min-height:420px;background:#0c0f16;border:1px dashed #2a3146;display:flex;align-items:center;justify-content:center">Drop files, then update paths</div>
          <div class="hint">Extract your next .h5p to <span class="pill">h5p/slot-a/</span> and put the original at <span class="pill">h5p/slot-a-original.h5p</span>. No other edits needed.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">H5P Module Slot B</h3>
          <div id="h5p-slot-b" class="embed" data-h5p-json="h5p/slot-b" data-download="h5p/slot-b-original.h5p" style="min-height:420px;background:#0c0f16;border:1px dashed #2a3146;display:flex;align-items:center;justify-content:center">Drop files, then update paths</div>
          <div class="hint">Extract to <span class="pill">h5p/slot-b/</span> and place the .h5p at <span class="pill">h5p/slot-b-original.h5p</span>.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">Desmos Graphing Calculator</h3>
          <iframe height="500" src="https://www.desmos.com/calculator?lang=en&embed" allowfullscreen></iframe>
          <div class="hint">Use your own Desmos link to preload a graph.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">GeoGebra</h3>
          <iframe height="520" src="https://www.geogebra.org/material/iframe/id/ApfM3H6B/width/800/height/520/border/888/rc/0/ai/1/sdz/true/smb/false/stb/false" allowfullscreen></iframe>
          <div class="hint">Replace the id with your own GeoGebra material.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">PhET Simulation</h3>
          <iframe height="560" src="https://phet.colorado.edu/sims/html/pendulum-lab/latest/pendulum-lab_en.html" allowfullscreen></iframe>
          <div class="hint">Swap the URL for any PhET sim.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">SageMath/Python Cell (server‑backed)</h3>
          <div class="sagecell card" style="background:#0c0f16">
            <script type="text/x-sage"># You can switch the language menu to Python, too
print('Hello from SageCell')
2^10
</script>
          </div>
          <script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script>
          <script>try{sagecell.makeSagecell({inputLocation:'.sagecell',languages:['sage','python']});}catch(e){console.warn(e)}</script>
          <div class="hint">Runs on sagecell.sagemath.org. Great for math demos without hosting anything.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">JupyterLite (Python in the browser)</h3>
          <iframe height="560" src="https://jupyterlite.github.io/demo/lab/index.html" sandbox="allow-scripts allow-modals allow-same-origin" allow="clipboard-write"></iframe>
          <div class="hint">Pure WebAssembly/pyodide. No server.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">Observable Notebook</h3>
          <iframe height="620" src="https://observablehq.com/embed/@d3/zoomable-sunburst?cell=chart"></iframe>
          <div class="hint">Use any public notebook’s embed link.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">Quizlet Flashcards</h3>
          <iframe height="520" src="https://quizlet.com/132695520/flashcards/embed" allowfullscreen></iframe>
          <div class="hint">Share → Embed from any public set.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">H5P Interactive Content</h3>
          <iframe height="520" src="https://h5p.org/h5p/embed/109888" allowfullscreen></iframe>
          <div class="hint">If you host H5P, paste your own embed URL here.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">Replit (Code in Browser)</h3>
          <iframe height="560" src="https://replit.com/@replit/Intro-to-Python?embed=true" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          <div class="hint">Any public repl works with ?embed=true.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">StackBlitz (WebContainers)</h3>
          <iframe height="560" src="https://stackblitz.com/edit/js-hello-world?embed=1&file=index.html&hideExplorer=1&hideNavigation=1" allow="clipboard-write"></iframe>
          <div class="hint">Run JS/TS projects fully in-browser.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">Mol* 3D Molecules</h3>
          <iframe height="520" src="https://molstar.org/viewer/?pdb=1cbs" allow="xr; vr; fullscreen" allowfullscreen></iframe>
          <div class="hint">Change the pdb param to visualize different proteins.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">Circuit Simulator (Falstad)</h3>
          <iframe height="560" src="https://www.falstad.com/circuit/circuitjs.html" allowfullscreen></iframe>
          <div class="hint">Menu → File → Import/Export to share circuits.</div>
        </div>
      
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">Periodic Table (PTable)</h3>
          <iframe height="560" src="https://ptable.com/#Property=Electronegativity" allowfullscreen></iframe>
          <div class="hint">Interactive periodic table with properties and isotopes.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">Live LaTeX → Math (KaTeX)</h3>
          <textarea id="katex-input" style="width:100%;height:120px;border-radius:12px;padding:10px;background:#0c0f16;color:#e9edf1;border:1px solid #2a3146">\int_0^1 x^2 \, dx = \frac{1}{3}</textarea>
          <div id="katex-output" class="card" style="margin-top:10px;overflow:auto;background:#0c0f16"></div>
          <div class="hint">Type LaTeX math above. Renders instantly below.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">Mermaid Diagram Editor</h3>
          <textarea id="mermaid-input" style="width:100%;height:160px;border-radius:12px;padding:10px;background:#0c0f16;color:#e9edf1;border:1px solid #2a3146">flowchart TD
  A[Start] --> B{Study?}
  B -- Yes --> C[Do practice]
  B -- No --> D[Watch lecture]
  C --> E[Quiz]
  D --> E</textarea>
          <button id="mermaid-run" class="pill" style="margin-top:8px">Render</button>
          <div id="mermaid-output" class="card" style="margin-top:10px;background:#0c0f16"></div>
          <div class="hint">Great for flowcharts, state diagrams, sequence diagrams.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">Interactive Geometry (JSXGraph)</h3>
          <div id="jsxg-board" class="jxgbox" style="width:100%;height:420px;border-radius:12px"></div>
          <div class="hint">Drag the point; tangent line updates on the curve.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">CSV → Chart (local, private)</h3>
          <input type="file" id="csv-file" accept=".csv" class="pill" style="margin-bottom:8px">
          <canvas id="csv-chart" height="280"></canvas>
          <div class="hint">Upload a CSV with header row: first column = labels, rest = series.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">Pomodoro Timer</h3>
          <div id="pomodoro" class="embed" style="display:flex;gap:14px;align-items:center;justify-content:center;height:140px;background:#0c0f16;border:1px dashed #2a3146">
            <span id="pom-time" style="font-size:28px">25:00</span>
            <button id="pom-start" class="pill">Start</button>
            <button id="pom-pause" class="pill">Pause</button>
            <button id="pom-reset" class="pill">Reset</button>
          </div>
          <div class="hint">25/5 min by default. Adjust in the script if you like.</div>
        </div>
      
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">Excalidraw Whiteboard</h3>
          <iframe height="600" src="https://excalidraw.com/?embed=1&theme=dark" allowfullscreen></iframe>
          <div class="hint">Great for quick sketching and math diagrams.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">diagrams.net (draw.io) Editor</h3>
          <iframe height="600" src="https://app.diagrams.net/?embed=1&ui=min" allowfullscreen></iframe>
          <div class="hint">Create flowcharts/UML; export to PNG/SVG.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">Leaflet Map + GeoJSON Drop</h3>
          <div id="leaflet-map" class="embed" style="height:420px"></div>
          <div class="hint">Drag & drop a GeoJSON file onto the map to visualize your data.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">Python (Pyodide) Mini‑Lab</h3>
          <textarea id="py-code" style="width:100%;height:140px;border-radius:12px;padding:10px;background:#0c0f16;color:#e9edf1;border:1px solid #2a3146">print('hello')
2+2</textarea>
          <div style="margin-top:8px;display:flex;gap:8px"><button id="py-load" class="pill">Load Python</button><button id="py-run" class="pill">Run</button></div>
          <pre id="py-out" class="card" style="margin-top:10px;white-space:pre-wrap;background:#0c0f16"></pre>
          <div class="hint">Runs entirely in your browser (WebAssembly). First load takes a few seconds.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">Markdown Notes (autosave)</h3>
          <textarea id="md-notes"></textarea>
          <div style="margin-top:8px;display:flex;gap:8px"><button id="md-download" class="pill">Download .md</button><button id="annotate-toggle" class="pill">Enable annotations</button></div>
          <div class="hint">Edits auto‑save to your browser. “Enable annotations” loads Hypothes.is for highlights/comments.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">TimelineJS (sample)</h3>
          <iframe height="650" src="https://cdn.knightlab.com/libs/timeline3/latest/embed/index.html?source=1Z0Gf8m0V1Z3rXvDemoSpreadsheetID&font=Default&lang=en&initial_zoom=2&height=650"></iframe>
          <div class="hint">Replace the <span class="pill">source=</span> with your Google Sheet ID from TimelineJS.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">p5.js Sketch Pad</h3>
          <div id="p5-container" class="embed" style="height:280px"></div>
          <textarea id="p5-code" style="width:100%;height:140px;border-radius:12px;padding:10px;background:#0c0f16;color:#e9edf1;border:1px solid #2a3146">// Draws a bouncing ball
let x=20,y=20,vx=3,vy=2;
function setup(){ createCanvas(480,240); }
function draw(){ background(0); ellipse(x,y,24,24); x+=vx; y+=vy; if(x<12||x>width-12) vx*=-1; if(y<12||y>height-12) vy*=-1; }</textarea>
          <div style="margin-top:8px;display:flex;gap:8px"><button id="p5-run" class="pill">Run sketch</button></div>
          <div class="hint">Edit the code and click Run to update.</div>
        </div>
      
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">Kindle Instant Preview (ASIN)</h3>
          <iframe id="kindle-preview" height="420" style="width:100%" frameborder="0" allowfullscreen src="https://read.amazon.com/kp/card?asin=B0049U4CCE&preview=newtab&linkCode=kpe"></iframe>
          <div class="hint">Replace the <span class="pill">asin=</span> with your book’s ASIN. You can get the embed from your book’s Amazon page via Share → Embed, or drop the ASIN directly into this URL.</div>
        </div>
        <div class="card">
          <h3 style="margin:6px 0 10px;font-size:18px">OneNote (Open in new tab + OneDrive tile)</h3>
          <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px">
            <a id="onenote-link" class="pill" href="#" target="_blank" rel="noopener">Open shared OneNote</a>
          </div>
          <iframe id="onenote-embed" height="300" style="width:100%" frameborder="0" src="about:blank"></iframe>
          <div class="hint">Paste your OneNote share link and OneDrive embed link in the script below. Due to Microsoft login and frame protections, most OneNote content can’t be fully embedded; the tile below links out to OneNote on the web.</div>
        </div>
      </div>
    </section>

    <footer>
      <p>Tip: Many platforms offer an “Embed” or “Share → Embed” option. Copy their iframe/script here and you’re done.</p>
    </footer>
  </main>

  <script>
    // Simple countdown widget
    (function(){
      const el = document.getElementById('countdown');
      const target = new Date('2025-12-31T23:59:59-06:00').getTime(); // Change me
      const tick = () => {
        const now = Date.now();
        const diff = Math.max(0, target - now);
        const s = Math.floor(diff/1000)%60;
        const m = Math.floor(diff/60000)%60;
        const h = Math.floor(diff/3600000)%24;
        const d = Math.floor(diff/86400000);
        el.textContent = `${d}d ${h}h ${m}m ${s}s`;
        if(diff>0) requestAnimationFrame(tick);
        else el.textContent = '🎉 It\'s time!';
      };
      tick();
    })();
  </script>

  <!-- Optional embeds you can enable later:
  Calendly inline (replace with your scheduling link):
  <div class="card"><div class="calendly-inline-widget" data-url="https://calendly.com/your-name/30min" style="min-width:320px;height:700px"></div></div>
  <script src="https://assets.calendly.com/assets/external/widget.js" async></script>

  Discord server widget (needs your server ID):
  <iframe src="https://discord.com/widget?id=YOUR_SERVER_ID&theme=dark" height="400" allowtransparency="true" sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"></iframe>
  -->
  
  <!-- H5P Standalone player JS (for self-hosted H5P embeds) -->
  <script src="https://cdn.jsdelivr.net/npm/h5p-standalone@3.7.0/dist/frame.bundle.js"></script>
  <script>
    // Initialize H5P players
    document.addEventListener('DOMContentLoaded', function () {
      function boot(el, jsonPath, downloadUrl){
        if(!el) return;
        try{
          new H5PStandalone.H5P(el, {
            h5pJsonPath: jsonPath,
            frameJs: 'https://cdn.jsdelivr.net/npm/h5p-standalone@3.7.0/dist/frame.bundle.js',
            frameCss: 'https://cdn.jsdelivr.net/npm/h5p-standalone@3.7.0/dist/styles/h5p.css',
            fullScreen: true,
            export: true,
            downloadUrl: downloadUrl
          });
        }catch(e){
          console.warn('H5P init failed for', jsonPath, e);
          el.textContent = 'H5P failed to load. Ensure '+jsonPath+' exists on your site.';
        }
      }

      // 1) Existing Cornell module (already wired)
      boot(
        document.getElementById('h5p-cornell'),
        'h5p/cornell',
        'h5p/the-cornell-note-taking-system-1255983.h5p'
      );

      // 2) Generic slots (A/B) — edit data attributes or file paths only
      document.querySelectorAll('[data-h5p-json]').forEach(function(el){
        var jsonPath = el.getAttribute('data-h5p-json');
        var downloadUrl = el.getAttribute('data-download') || '';
        boot(el, jsonPath, downloadUrl);
      });
    });
  </script>

  <!-- Study widgets logic -->
  <script>
    // 1) KaTeX live render
    document.addEventListener('DOMContentLoaded', function(){
      var input = document.getElementById('katex-input');
      var out = document.getElementById('katex-output');
      if(input && out && window.katex){
        function render(){ try{ window.katex.render(input.value, out, {throwOnError:false}); }catch(e){ out.textContent = e.message; } }
        input.addEventListener('input', render); render();
      }
    });

    // 2) Mermaid renderer
    document.addEventListener('DOMContentLoaded', function(){
      if(window.mermaid){ mermaid.initialize({ startOnLoad:false, theme:'dark' }); }
      var btn = document.getElementById('mermaid-run');
      var ta = document.getElementById('mermaid-input');
      var out = document.getElementById('mermaid-output');
      if(btn && ta && out && window.mermaid){
        btn.addEventListener('click', async function(){
          try{
            const { svg } = await mermaid.render('mermaid-'+Date.now(), ta.value);
            out.innerHTML = svg;
          }catch(e){ out.textContent = 'Mermaid error: '+e; }
        });
        btn.click();
      }
    });

    // 3) JSXGraph example: tangent to y = x^2
    document.addEventListener('DOMContentLoaded', function(){
      var box = document.getElementById('jsxg-board');
      if(!box || !window.JXG) return;
      var brd = JXG.JSXGraph.initBoard('jsxg-board', {boundingbox:[-3,5,3,-2], axis:true});
      var f = function(x){ return x*x; };
      var graph = brd.create('functiongraph', [f, -3, 3]);
      var A = brd.create('glider', [1, f(1), graph], {name:'A', size:3});
      var tang = brd.create('tangent', [A]);
    });

    // 4) CSV → Chart using Chart.js
    document.addEventListener('DOMContentLoaded', function(){
      var file = document.getElementById('csv-file');
      var cvs = document.getElementById('csv-chart');
      if(!file || !cvs || !window.Chart) return;
      var chart;
      function parseCSV(text){
        const lines = text.trim().split(/
?
/);
        const headers = lines[0].split(',').map(s=>s.trim());
        const labels = []; const cols = headers.slice(1).map(h=>({label:h, data:[]}));
        for(let i=1;i<lines.length;i++){
          const parts = lines[i].split(',');
          labels.push(parts[0]);
          for(let j=1;j<headers.length;j++) cols[j-1].data.push(Number(parts[j]||0));
        }
        return { labels, datasets: cols.map(c=>({label:c.label, data:c.data})) };
      }
      file.addEventListener('change', function(){
        const f = file.files && file.files[0]; if(!f) return;
        const reader = new FileReader();
        reader.onload = function(){
          const {labels, datasets} = parseCSV(String(reader.result));
          if(chart) chart.destroy();
          chart = new Chart(cvs.getContext('2d'), { type:'line', data:{ labels, datasets } });
        };
        reader.readAsText(f);
      });
    });

    // 5) Simple Pomodoro
    document.addEventListener('DOMContentLoaded', function(){
      var t = document.getElementById('pom-time');
      var start = document.getElementById('pom-start');
      var pause = document.getElementById('pom-pause');
      var reset = document.getElementById('pom-reset');
      if(!t || !start || !pause || !reset) return;
      var work = 25*60, rest = 5*60; // seconds
      var remaining = work, running=false, timer=null, onBreak=false;
      function fmt(s){ const m=String(Math.floor(s/60)).padStart(2,'0'); const ss=String(s%60).padStart(2,'0'); return m+':'+ss; }
      function tick(){ if(remaining>0){ remaining--; t.textContent = fmt(remaining); }
        else{ onBreak = !onBreak; remaining = onBreak?rest:work; t.textContent = onBreak?fmt(remaining)+' (break)':fmt(remaining); }
      }
      start.onclick = function(){ if(running) return; running=true; timer=setInterval(tick,1000); };
      pause.onclick = function(){ running=false; clearInterval(timer); };
      reset.onclick = function(){ running=false; clearInterval(timer); onBreak=false; remaining=work; t.textContent=fmt(remaining); };
      t.textContent = fmt(remaining);
    });
  </script>

  <!-- Extra study widgets logic -->
  <script>
    // Leaflet map init + GeoJSON drag-drop
    document.addEventListener('DOMContentLoaded', function(){
      var el = document.getElementById('leaflet-map');
      if(!el || !window.L) return;
      var map = L.map('leaflet-map').setView([20,0], 2);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution:'© OpenStreetMap' }).addTo(map);
      var layer;
      function showGeoJSON(obj){ if(layer) map.removeLayer(layer); layer = L.geoJSON(obj).addTo(map); try{ map.fitBounds(layer.getBounds(), { padding:[20,20] }); }catch(e){} }
      function handleFile(f){ var reader = new FileReader(); reader.onload = function(){ try{ showGeoJSON(JSON.parse(reader.result)); }catch(e){ alert('Invalid GeoJSON'); } }; reader.readAsText(f); }
      el.addEventListener('dragover', function(e){ e.preventDefault(); e.dataTransfer.dropEffect='copy'; });
      el.addEventListener('drop', function(e){ e.preventDefault(); if(e.dataTransfer.files && e.dataTransfer.files[0]) handleFile(e.dataTransfer.files[0]); });
    });

    // Markdown editor with autosave + download (SimpleMDE)
    document.addEventListener('DOMContentLoaded', function(){
      var ta = document.getElementById('md-notes');
      if(!ta || !window.SimpleMDE) return;
      var mde = new SimpleMDE({ element: ta, spellChecker: false, autosave: { enabled:true, uniqueId:'study-md', delay: 500 } });
      var dl = document.getElementById('md-download');
      if(dl){ dl.onclick = function(){ var blob = new Blob([mde.value()], {type:'text/markdown'}); var a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='notes.md'; a.click(); URL.revokeObjectURL(a.href); }; }
      var ann = document.getElementById('annotate-toggle');
      if(ann){ ann.onclick = function(){ var s=document.createElement('script'); s.src='https://hypothes.is/embed.js'; document.body.appendChild(s); ann.disabled=true; ann.textContent='Annotations enabled'; }; }
    });

    // Pyodide lazy loader + runner
    (function(){
      var pyLoaded=false, py, loading=false;
      function loadPy(){ if(pyLoaded||loading) return Promise.resolve(); loading=true; return new Promise(function(resolve){ var s=document.createElement('script'); s.src='https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js'; s.onload = async function(){ py = await loadPyodide({indexURL:'https://cdn.jsdelivr.net/pyodide/v0.25.1/full/'}); pyLoaded=true; loading=false; resolve(); }; document.body.appendChild(s); }); }
      function run(){ var code = document.getElementById('py-code').value; var out = document.getElementById('py-out'); if(!pyLoaded){ out.textContent='Python not loaded yet.'; return; } (async()=>{ try{ let result = await py.runPythonAsync(code); out.textContent = String(result ?? ''); }catch(e){ out.textContent = String(e); } })(); }
      document.addEventListener('DOMContentLoaded', function(){ var btnL=document.getElementById('py-load'); var btnR=document.getElementById('py-run'); if(btnL) btnL.onclick = function(){ var out=document.getElementById('py-out'); out.textContent='Loading Python…'; loadPy().then(()=>{ out.textContent='Python ready.'; }); }; if(btnR) btnR.onclick = run; });
    })();

    // p5 sketch runner (instance mode into #p5-container)
    document.addEventListener('DOMContentLoaded', function(){
      var btn = document.getElementById('p5-run'); var ta = document.getElementById('p5-code'); var host = document.getElementById('p5-container');
      var current=null;
      function run(){ if(!window.p5) return; if(current){ try{ current.remove(); }catch(e){} current=null; } var code = ta.value; var sketch = new Function('p', code.replace(/function setup\(/,'p.setup=function(').replace(/function draw\(/,'p.draw=function(')); current = new p5(function(p){ try{ sketch(p); }catch(e){ console.error(e); } }, host); }
      if(btn && ta && host) btn.onclick = run;
      if(window.p5) setTimeout(run, 0);
    });
  </script>

  <!-- Kindle + OneNote helpers -->
  <script>
    // OneNote: set these two values to your links (optional)
    // 1) A regular shared notebook/page link (opens in a new tab)
    var ONENOTE_SHARED_LINK = '';
    // 2) OneDrive "Embed" iframe link (shows a tile that links out)
    var ONENOTE_ONEDRIVE_EMBED = '';

    (function(){
      var a = document.getElementById('onenote-link');
      var f = document.getElementById('onenote-embed');
      if(a && ONENOTE_SHARED_LINK){ a.href = ONENOTE_SHARED_LINK; }
      if(f && ONENOTE_ONEDRIVE_EMBED){ f.src = ONENOTE_ONEDRIVE_EMBED; }
    })();
  </script>
</body>
</html>
